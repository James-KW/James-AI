<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek Chat Interface</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .chat-container {
            width: 100%;
            max-width: 900px;
            height: 80vh;
            background-color: #0f3460;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background-color: #1a1a2e;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #2d3746;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 18px;
        }
        
        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(90deg, #4cc9f0, #4361ee);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .header-buttons {
            display: flex;
            gap: 10px;
        }
        
        .header-btn {
            background: transparent;
            border: 1px solid #4cc9f0;
            color: #4cc9f0;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .header-btn:hover {
            background-color: rgba(76, 201, 240, 0.1);
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .message {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bot-message {
            background-color: #1a1a2e;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .user-message {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            border-bottom-right-radius: 5px;
            align-self: flex-end;
            box-shadow: 0 4px 6px rgba(67, 97, 238, 0.3);
        }
        
        .message-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        .bot-avatar {
            background: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
        }
        
        .user-avatar {
            background: linear-gradient(135deg, #f72585 0%, #7209b7 100%);
        }
        
        .sender-name {
            font-weight: 600;
            font-size: 14px;
        }
        
        .message-content {
            font-size: 15px;
        }
        
        .file-attachment {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .file-icon {
            font-size: 20px;
            color: #4cc9f0;
        }
        
        .file-info {
            flex: 1;
        }
        
        .file-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .file-size {
            font-size: 12px;
            color: #a0a0a0;
        }
        
        .file-actions {
            display: flex;
            gap: 8px;
        }
        
        .file-action-btn {
            background: transparent;
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            font-size: 14px;
            transition: color 0.3s;
        }
        
        .file-action-btn:hover {
            color: #4cc9f0;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            color: #a0a0a0;
            font-style: italic;
        }
        
        .typing-dots {
            display: flex;
            gap: 3px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #4cc9f0;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }
        
        .code-block {
            background-color: #1e1e1e;
            border-radius: 8px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid #2d3746;
        }
        
        .code-header {
            background-color: #2d2d2d;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #a0a0a0;
            border-bottom: 1px solid #3d3d3d;
        }
        
        .code-content {
            padding: 15px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .code-content pre {
            margin: 0;
            white-space: pre-wrap;
        }
        
        .copy-btn {
            background: transparent;
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: color 0.3s;
        }
        
        .copy-btn:hover {
            color: #4cc9f0;
        }
        
        .welcome-section {
            text-align: center;
            padding: 30px 20px;
            background: rgba(26, 26, 46, 0.5);
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .welcome-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: #4cc9f0;
        }
        
        .welcome-text {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #4cc9f0, #4361ee);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .welcome-subtext {
            color: #a0a0a0;
            margin-bottom: 20px;
        }
        
        .features {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature {
            background: rgba(26, 26, 46, 0.7);
            padding: 12px 20px;
            border-radius: 30px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid #2d3746;
        }
        
        .feature i {
            color: #4cc9f0;
        }
        
        .chat-input-container {
            padding: 20px;
            background-color: #1a1a2e;
            border-top: 1px solid #2d3746;
            display: flex;
            gap: 15px;
        }
        
        .input-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .action-btn {
            background: transparent;
            border: 1px solid #2d3746;
            color: #a0a0a0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            background-color: rgba(76, 201, 240, 0.1);
            color: #4cc9f0;
            border-color: #4cc9f0;
        }
        
        .chat-input-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border-radius: 30px;
            border: 1px solid #2d3746;
            background-color: #0f3460;
            color: #e6e6e6;
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .chat-input:focus {
            border-color: #4cc9f0;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.2);
        }
        
        .send-button {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            transition: all 0.3s ease;
            align-self: flex-end;
        }
        
        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }
        
        .uploaded-files {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .uploaded-file {
            background: rgba(26, 26, 46, 0.7);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid #2d3746;
        }
        
        .uploaded-file i {
            color: #4cc9f0;
        }
        
        .remove-file {
            background: none;
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            margin-left: 5px;
        }
        
        .remove-file:hover {
            color: #f72585;
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #0f3460;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #4cc9f0;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #4361ee;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: #1a1a2e;
            border-radius: 15px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #2d3746;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #4cc9f0;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: #a0a0a0;
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: #f72585;
        }
        
        .upload-area {
            border: 2px dashed #4cc9f0;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            background-color: rgba(76, 201, 240, 0.1);
        }
        
        .upload-icon {
            font-size: 48px;
            color: #4cc9f0;
            margin-bottom: 15px;
        }
        
        .upload-text {
            margin-bottom: 10px;
        }
        
        .upload-subtext {
            color: #a0a0a0;
            font-size: 14px;
        }
        
        .file-input {
            display: none;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .modal-btn-primary {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
        }
        
        .modal-btn-secondary {
            background: transparent;
            border: 1px solid #2d3746;
            color: #a0a0a0;
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .chat-container {
                height: 90vh;
                border-radius: 15px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .logo-text {
                font-size: 20px;
            }
            
            .welcome-text {
                font-size: 24px;
            }
            
            .features {
                flex-direction: column;
                align-items: center;
            }
            
            .header-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .header-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="logo">
                <div class="logo-icon">DS</div>
                <div class="logo-text">DeepSeek</div>
            </div>
            <div class="header-buttons">
                <button class="header-btn" id="uploadBtn">
                    <i class="fas fa-upload"></i>
                    Upload Files
                </button>
                <button class="header-btn">
                    <i class="fas fa-search"></i>
                    DeepThink Search
                </button>
            </div>
        </div>
        
        <div class="chat-messages">
            <div class="welcome-section">
                <div class="welcome-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="welcome-text">Hi, I'm DeepSeek</div>
                <div class="welcome-subtext">Upload documents, images, or photos and I'll help you analyze them</div>
                
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-file-upload"></i>
                        Document analysis
                    </div>
                    <div class="feature">
                        <i class="fas fa-image"></i>
                        Image recognition
                    </div>
                    <div class="feature">
                        <i class="fas fa-code"></i>
                        Code generation
                    </div>
                    <div class="feature">
                        <i class="fas fa-question-circle"></i>
                        Answer questions
                    </div>
                </div>
            </div>
            
            <div class="message bot-message">
                <div class="message-header">
                    <div class="avatar bot-avatar">AI</div>
                    <div class="sender-name">DeepSeek</div>
                </div>
                <div class="message-content">
                    Hi! I'm DeepSeek, your AI assistant. I can now process uploaded files including documents, images, and photos. Just click the upload button to get started!
                </div>
            </div>
            
            <div class="message user-message">
                <div class="message-header">
                    <div class="avatar user-avatar">You</div>
                    <div class="sender-name">You</div>
                </div>
                <div class="message-content">
                    I need help analyzing some documents and images for my project.
                </div>
            </div>
            
            <div class="message bot-message">
                <div class="message-header">
                    <div class="avatar bot-avatar">AI</div>
                    <div class="sender-name">DeepSeek</div>
                </div>
                <div class="message-content">
                    I'd be happy to help you analyze documents and images! You can upload multiple files at once using the upload button. I support PDFs, Word documents, images (JPG, PNG, etc.), and more.
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator" style="display: none;">
                <span>DeepSeek is typing</span>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <div class="input-actions">
                <button class="action-btn" id="attachFileBtn" title="Attach file">
                    <i class="fas fa-paperclip"></i>
                </button>
                <button class="action-btn" id="imageUploadBtn" title="Upload image">
                    <i class="fas fa-image"></i>
                </button>
            </div>
            
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" placeholder="Message DeepSeek" id="chatInput">
                <div class="uploaded-files" id="uploadedFiles">
                    <!-- Uploaded files will appear here -->
                </div>
            </div>
            
            <button class="send-button" id="sendButton">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- File Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Upload Files</div>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="upload-text">Drag & drop files here or click to browse</div>
                <div class="upload-subtext">Supports documents, images, and more (Max: 10MB per file)</div>
                <input type="file" class="file-input" id="fileInput" multiple>
            </div>
            
            <div class="selected-files" id="selectedFiles">
                <!-- Selected files will appear here -->
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="cancelUpload">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="confirmUpload">Upload Files</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize highlight.js for code syntax highlighting
        hljs.highlightAll();
        
        // DOM elements
        const chatMessages = document.querySelector('.chat-messages');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const uploadBtn = document.getElementById('uploadBtn');
        const attachFileBtn = document.getElementById('attachFileBtn');
        const imageUploadBtn = document.getElementById('imageUploadBtn');
        const uploadModal = document.getElementById('uploadModal');
        const closeModal = document.getElementById('closeModal');
        const cancelUpload = document.getElementById('cancelUpload');
        const confirmUpload = document.getElementById('confirmUpload');
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const selectedFiles = document.getElementById('selectedFiles');
        const uploadedFiles = document.getElementById('uploadedFiles');
        
        // Store uploaded files
        let currentFiles = [];
        
        // Function to add a new message
        function addMessage(content, isUser = false, files = []) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
            
            const sender = isUser ? 'You' : 'DeepSeek';
            const avatarClass = isUser ? 'user-avatar' : 'bot-avatar';
            const avatarText = isUser ? 'You' : 'AI';
            
            let fileAttachments = '';
            if (files.length > 0) {
                fileAttachments = files.map(file => `
                    <div class="file-attachment">
                        <div class="file-icon">
                            <i class="fas fa-${getFileIcon(file.type)}"></i>
                        </div>
                        <div class="file-info">
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${formatFileSize(file.size)}</div>
                        </div>
                        <div class="file-actions">
                            <button class="file-action-btn" onclick="downloadFile('${file.name}', '${file.content}')">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="avatar ${avatarClass}">${avatarText}</div>
                    <div class="sender-name">${sender}</div>
                </div>
                <div class="message-content">
                    ${content}
                    ${fileAttachments}
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Function to get appropriate file icon
        function getFileIcon(fileType) {
            if (fileType.startsWith('image/')) return 'file-image';
            if (fileType === 'application/pdf') return 'file-pdf';
            if (fileType.includes('document') || fileType.includes('word')) return 'file-word';
            if (fileType.includes('sheet') || fileType.includes('excel')) return 'file-excel';
            if (fileType.includes('presentation') || fileType.includes('powerpoint')) return 'file-powerpoint';
            return 'file';
        }
        
        // Function to format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // Function to simulate typing effect
        function typeMessage(message, isCode = false, callback) {
            // Show typing indicator
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Create message container
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', 'bot-message');
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="avatar bot-avatar">AI</div>
                    <div class="sender-name">DeepSeek</div>
                </div>
                <div class="message-content">
                    ${isCode ? '<div class="code-block"><div class="code-header">JavaScript <button class="copy-btn"><i class="far fa-copy"></i> Copy</button></div><div class="code-content"><pre><code class="language-javascript"></code></pre></div></div>' : ''}
                    <div class="text-content" ${isCode ? 'style="display:none;"' : ''}></div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            
            const textContainer = isCode 
                ? messageDiv.querySelector('.text-content')
                : messageDiv.querySelector('.message-content');
                
            const codeContainer = isCode 
                ? messageDiv.querySelector('code')
                : null;
            
            let index = 0;
            const typingSpeed = isCode ? 10 : 30; // Code types faster
            
            function typeCharacter() {
                if (index < message.length) {
                    const char = message.charAt(index);
                    
                    if (isCode) {
                        codeContainer.textContent += char;
                        // Re-highlight code as we type
                        hljs.highlightElement(codeContainer);
                    } else {
                        textContainer.textContent += char;
                    }
                    
                    index++;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    setTimeout(typeCharacter, typingSpeed);
                } else {
                    // Hide typing indicator when done
                    typingIndicator.style.display = 'none';
                    
                    // Add copy functionality to code blocks
                    if (isCode) {
                        const copyBtn = messageDiv.querySelector('.copy-btn');
                        copyBtn.addEventListener('click', () => {
                            navigator.clipboard.writeText(message).then(() => {
                                const originalText = copyBtn.innerHTML;
                                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                                setTimeout(() => {
                                    copyBtn.innerHTML = originalText;
                                }, 2000);
                            });
                        });
                    }
                    
                    // Execute callback if provided
                    if (callback) callback();
                }
            }
            
            // Start typing after a short delay
            setTimeout(typeCharacter, 500);
        }
        
        // Function to simulate bot response with typing effect
        function simulateBotResponse(userMessage, files = []) {
            // Show typing indicator immediately
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Hide typing indicator after a random delay (simulating thinking)
            setTimeout(() => {
                // Determine response type based on user message and files
                const lowerMessage = userMessage.toLowerCase();
                let response = "";
                
                if (files.length > 0) {
                    const fileNames = files.map(f => f.name).join(', ');
                    response = `I've received your files: ${fileNames}. I'll analyze them and provide insights shortly. `;
                    
                    // Add file-specific responses
                    const hasImages = files.some(f => f.type.startsWith('image/'));
                    const hasDocuments = files.some(f => 
                        f.type.includes('pdf') || 
                        f.type.includes('document') || 
                        f.type.includes('text')
                    );
                    
                    if (hasImages) {
                        response += "I can help you with image analysis, object recognition, or extracting text from images. ";
                    }
                    
                    if (hasDocuments) {
                        response += "I can summarize documents, extract key information, or answer questions about the content. ";
                    }
                    
                    response += "What specific assistance would you like with these files?";
                } else if (lowerMessage.includes('code') || lowerMessage.includes('javascript') || lowerMessage.includes('html') || lowerMessage.includes('css')) {
                    // Code response
                    const codeExample = `// Example: File Upload Functionality
function handleFileUpload(files) {
    const uploadedFiles = [];
    
    for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const reader = new FileReader();
        
        reader.onload = function(e) {
            uploadedFiles.push({
                name: file.name,
                type: file.type,
                size: file.size,
                content: e.target.result
            });
            
            // Display file in UI
            displayUploadedFile(file);
        };
        
        reader.readAsDataURL(file);
    }
    
    return uploadedFiles;
}`;
                    
                    typeMessage(codeExample, true);
                    return;
                } else {
                    // Regular text response
                    const responses = [
                        "I understand your request. Let me help you with that. I can provide detailed information, generate code, or assist with any specific questions you might have about your project.",
                        "That's an interesting question. Based on my knowledge, I can offer several approaches to solve this problem. Would you like me to elaborate on any specific aspect?",
                        "Thanks for your message! I'm processing your request and will provide a comprehensive response. Is there anything specific you'd like me to focus on?",
                        "I've analyzed your query and can provide multiple solutions. Let me know if you'd like me to proceed with the most common approach or if you have specific requirements."
                    ];
                    
                    response = responses[Math.floor(Math.random() * responses.length)];
                }
                
                typeMessage(response);
            }, 1000);
        }
        
        // Function to handle file selection
        function handleFileSelect(e) {
            const files = e.target.files;
            if (files.length === 0) return;
            
            selectedFiles.innerHTML = '';
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // Check file size (limit to 10MB)
                if (file.size > 10 * 1024 * 1024) {
                    alert(`File ${file.name} is too large. Maximum size is 10MB.`);
                    continue;
                }
                
                const fileElement = document.createElement('div');
                fileElement.classList.add('uploaded-file');
                fileElement.innerHTML = `
                    <i class="fas fa-${getFileIcon(file.type)}"></i>
                    ${file.name} (${formatFileSize(file.size)})
                    <button class="remove-file" data-index="${i}">&times;</button>
                `;
                
                selectedFiles.appendChild(fileElement);
                
                // Add remove functionality
                fileElement.querySelector('.remove-file').addEventListener('click', function() {
                    // Create a new FileList without the removed file
                    const dt = new DataTransfer();
                    for (let j = 0; j < files.length; j++) {
                        if (j !== parseInt(this.getAttribute('data-index'))) {
                            dt.items.add(files[j]);
                        }
                    }
                    fileInput.files = dt.files;
                    fileElement.remove();
                });
            }
        }
        
        // Function to display uploaded files in the input area
        function displayUploadedFiles(files) {
            uploadedFiles.innerHTML = '';
            
            files.forEach((file, index) => {
                const fileElement = document.createElement('div');
                fileElement.classList.add('uploaded-file');
                fileElement.innerHTML = `
                    <i class="fas fa-${getFileIcon(file.type)}"></i>
                    ${file.name}
                    <button class="remove-file" data-index="${index}">&times;</button>
                `;
                
                uploadedFiles.appendChild(fileElement);
                
                // Add remove functionality
                fileElement.querySelector('.remove-file').addEventListener('click', function() {
                    currentFiles.splice(parseInt(this.getAttribute('data-index')), 1);
                    displayUploadedFiles(currentFiles);
                });
            });
        }
        
        // Function to read file as text or data URL
        function readFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    resolve({
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        content: e.target.result
                    });
                };
                
                reader.onerror = function(e) {
                    reject(e);
                };
                
                if (file.type.startsWith('image/') || file.type === 'application/pdf') {
                    reader.readAsDataURL(file);
                } else {
                    reader.readAsText(file);
                }
            });
        }
        
        // Function to simulate file download
        function downloadFile(filename, content) {
            const element = document.createElement('a');
            element.setAttribute('href', content);
            element.setAttribute('download', filename);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        
        // Event Listeners
        
        // Send message on button click
        sendButton.addEventListener('click', () => {
            const message = chatInput.value.trim();
            if (message || currentFiles.length > 0) {
                addMessage(message, true, currentFiles);
                chatInput.value = '';
                simulateBotResponse(message, currentFiles);
                currentFiles = [];
                displayUploadedFiles(currentFiles);
